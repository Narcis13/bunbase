---
phase: 06-admin-ui-records
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - bunfig.toml
  - tsconfig.json
  - src/admin/index.html
  - src/admin/main.tsx
  - src/admin/styles/globals.css
  - src/admin/lib/utils.ts
  - src/admin/lib/api.ts
  - src/admin/components/ui/button.tsx
  - src/admin/components/ui/input.tsx
  - src/admin/components/ui/label.tsx
  - src/admin/components/ui/card.tsx
  - src/admin/components/ui/table.tsx
  - src/admin/components/ui/skeleton.tsx
  - src/admin/components/ui/sheet.tsx
  - src/admin/components/ui/dialog.tsx
  - src/admin/components/ui/alert-dialog.tsx
  - src/admin/components/ui/dropdown-menu.tsx
  - src/admin/components/ui/switch.tsx
  - src/admin/components/ui/textarea.tsx
  - src/admin/components/ui/sonner.tsx
  - src/admin/components/ui/sidebar.tsx
  - src/api/server.ts
autonomous: true

must_haves:
  truths:
    - "Bun.serve() serves admin HTML at /_/ routes"
    - "Tailwind CSS v4 styles apply correctly"
    - "shadcn/ui components render without errors"
  artifacts:
    - path: "src/admin/index.html"
      provides: "HTML entry point for admin SPA"
      contains: "type=\"module\""
    - path: "src/admin/main.tsx"
      provides: "React entry point with Toaster"
      exports: ["default"]
    - path: "src/admin/lib/utils.ts"
      provides: "cn() utility for class merging"
      exports: ["cn"]
    - path: "src/admin/lib/api.ts"
      provides: "Authenticated fetch helper"
      exports: ["fetchWithAuth"]
  key_links:
    - from: "src/api/server.ts"
      to: "src/admin/index.html"
      via: "Bun HTML import"
      pattern: "import.*admin.*index\\.html"
    - from: "src/admin/index.html"
      to: "src/admin/main.tsx"
      via: "script type=module"
      pattern: "src=\".*main\\.tsx\""
---

<objective>
Set up the admin UI foundation with React, Tailwind CSS v4, and shadcn/ui components

Purpose: Establish the build pipeline and component library that all other admin UI plans depend on
Output: Working admin page served at /_/ with styled placeholder content
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-admin-ui-records/06-CONTEXT.md
@.planning/phases/06-admin-ui-records/06-RESEARCH.md
@src/api/server.ts
@tsconfig.json
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and configure build</name>
  <files>
    - package.json
    - bunfig.toml
    - tsconfig.json
  </files>
  <action>
Install all required dependencies for the admin UI:

```bash
bun add react react-dom @tanstack/react-table react-hook-form @hookform/resolvers sonner lucide-react class-variance-authority clsx tailwind-merge tw-animate-css date-fns
bun add -d tailwindcss bun-plugin-tailwind @types/react @types/react-dom
```

Create bunfig.toml to enable Tailwind plugin for Bun.serve():

```toml
[serve.static]
plugins = ["bun-plugin-tailwind"]
```

Update tsconfig.json to add path aliases for shadcn/ui components:
- Add `"paths": { "@/*": ["./src/admin/*"] }` to compilerOptions
- Add `"baseUrl": "."` to compilerOptions

These path aliases allow imports like `@/components/ui/button` which is the shadcn/ui convention.
  </action>
  <verify>
    - `bun install` completes without errors
    - `cat bunfig.toml` shows the plugin configuration
    - `grep -A2 '"paths"' tsconfig.json` shows the path aliases
  </verify>
  <done>
    Dependencies installed, Tailwind plugin configured, TypeScript path aliases set up
  </done>
</task>

<task type="auto">
  <name>Task 2: Create admin UI foundation files</name>
  <files>
    - src/admin/index.html
    - src/admin/main.tsx
    - src/admin/App.tsx
    - src/admin/styles/globals.css
    - src/admin/lib/utils.ts
    - src/admin/lib/api.ts
  </files>
  <action>
Create the admin UI directory structure and core files:

**src/admin/index.html** - HTML entry point:
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BunBase Admin</title>
  <link rel="stylesheet" href="./styles/globals.css">
</head>
<body class="min-h-screen bg-background font-sans antialiased">
  <div id="root"></div>
  <script type="module" src="./main.tsx"></script>
</body>
</html>
```

**src/admin/styles/globals.css** - Tailwind v4 CSS with shadcn/ui variables:
Use the exact CSS from RESEARCH.md including:
- `@import "tailwindcss";`
- `@import "tw-animate-css";`
- `@custom-variant dark (&:is(.dark *));`
- All CSS custom properties for colors (--background, --foreground, --primary, etc.)

**src/admin/main.tsx** - React entry point:
```tsx
import { createRoot } from "react-dom/client";
import { Toaster } from "@/components/ui/sonner";
import App from "./App";

const root = createRoot(document.getElementById("root")!);
root.render(
  <>
    <App />
    <Toaster position="bottom-right" />
  </>
);
```

**src/admin/App.tsx** - Placeholder app component:
```tsx
export default function App() {
  return (
    <div className="flex items-center justify-center min-h-screen">
      <div className="text-center">
        <h1 className="text-3xl font-bold text-foreground">BunBase Admin</h1>
        <p className="mt-2 text-muted-foreground">Admin UI foundation ready</p>
      </div>
    </div>
  );
}
```

**src/admin/lib/utils.ts** - Class name utility:
```tsx
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

**src/admin/lib/api.ts** - Authenticated fetch helper:
Use the exact implementation from RESEARCH.md including:
- JWT token from localStorage
- Authorization header
- 401 handling with redirect to login
- Error response parsing
  </action>
  <verify>
    - `ls src/admin/` shows index.html, main.tsx, App.tsx
    - `ls src/admin/styles/` shows globals.css
    - `ls src/admin/lib/` shows utils.ts, api.ts
    - `grep "@import" src/admin/styles/globals.css` shows tailwindcss import
  </verify>
  <done>
    Admin UI directory structure created with HTML entry, React entry, Tailwind CSS, and utilities
  </done>
</task>

<task type="auto">
  <name>Task 3: Copy shadcn/ui components and update server</name>
  <files>
    - src/admin/components/ui/button.tsx
    - src/admin/components/ui/input.tsx
    - src/admin/components/ui/label.tsx
    - src/admin/components/ui/card.tsx
    - src/admin/components/ui/table.tsx
    - src/admin/components/ui/skeleton.tsx
    - src/admin/components/ui/sheet.tsx
    - src/admin/components/ui/dialog.tsx
    - src/admin/components/ui/alert-dialog.tsx
    - src/admin/components/ui/dropdown-menu.tsx
    - src/admin/components/ui/switch.tsx
    - src/admin/components/ui/textarea.tsx
    - src/admin/components/ui/sonner.tsx
    - src/admin/components/ui/sidebar.tsx
    - src/api/server.ts
  </files>
  <action>
Create shadcn/ui components in src/admin/components/ui/. These are copied from the shadcn/ui website, not installed as packages. Each component:
- Uses Radix UI primitives (installed via the dependencies)
- Uses the cn() utility from @/lib/utils
- Follows the exact shadcn/ui patterns

Required components (copy from https://ui.shadcn.com/docs/components):
1. **button.tsx** - Button with variants (default, destructive, outline, secondary, ghost, link)
2. **input.tsx** - Text input component
3. **label.tsx** - Form label component
4. **card.tsx** - Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter
5. **table.tsx** - Table, TableHeader, TableBody, TableRow, TableHead, TableCell
6. **skeleton.tsx** - Loading skeleton
7. **sheet.tsx** - Slide-over panel (requires @radix-ui/react-dialog - bun add @radix-ui/react-dialog)
8. **dialog.tsx** - Modal dialog (reuses radix dialog)
9. **alert-dialog.tsx** - Confirmation dialog (requires @radix-ui/react-alert-dialog - bun add @radix-ui/react-alert-dialog)
10. **dropdown-menu.tsx** - Dropdown menu (requires @radix-ui/react-dropdown-menu - bun add @radix-ui/react-dropdown-menu)
11. **switch.tsx** - Toggle switch for booleans (requires @radix-ui/react-switch - bun add @radix-ui/react-switch)
12. **textarea.tsx** - Multiline text input
13. **sonner.tsx** - Toaster wrapper for sonner
14. **sidebar.tsx** - Sidebar layout component (requires @radix-ui/react-slot - bun add @radix-ui/react-slot)

Install required Radix primitives:
```bash
bun add @radix-ui/react-dialog @radix-ui/react-alert-dialog @radix-ui/react-dropdown-menu @radix-ui/react-switch @radix-ui/react-slot @radix-ui/react-label @radix-ui/react-separator @radix-ui/react-tooltip
```

Update src/api/server.ts to serve the admin UI:
- Import admin HTML: `import adminHtml from "../admin/index.html";`
- Add routes for admin UI in the routes object:
  - `"/_/": adminHtml` - Root admin route
  - `"/_/*": adminHtml` - Catch-all for SPA routing

The existing API and auth routes remain unchanged. The admin HTML import uses Bun's native HTML bundling.
  </action>
  <verify>
    - `ls src/admin/components/ui/` shows all component files
    - `bun run typecheck` passes (no TypeScript errors)
    - Start server with `JWT_SECRET=test bun run src/api/server.ts` and verify:
      - `curl http://localhost:8090/_/` returns HTML with "BunBase Admin"
      - Browser at http://localhost:8090/_/ shows styled placeholder
  </verify>
  <done>
    shadcn/ui components copied, Radix primitives installed, server serves admin UI at /_/
  </done>
</task>

</tasks>

<verification>
1. `bun run typecheck` - TypeScript compiles without errors
2. Start server: `JWT_SECRET=test bun run src/api/server.ts`
3. Browser test: Navigate to http://localhost:8090/_/
   - Page loads without console errors
   - "BunBase Admin" heading visible with correct styling
   - Tailwind classes applied (font, colors, spacing)
4. API still works: `curl http://localhost:8090/api/collections/test/records` returns expected response
</verification>

<success_criteria>
- Admin UI served at /_/ route via Bun HTML imports
- Tailwind CSS v4 styling applies correctly
- shadcn/ui components available and importable
- TypeScript path aliases (@/) work
- Existing API routes unaffected
- All type checks pass
</success_criteria>

<output>
After completion, create `.planning/phases/06-admin-ui-records/06-01-SUMMARY.md`
</output>

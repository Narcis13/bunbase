---
phase: 13-ui-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/admin/components/ui/spinner.tsx
  - src/admin/components/records/RecordForm.tsx
  - src/admin/components/records/DeleteConfirmation.tsx
  - src/admin/components/schema/FieldForm.tsx
  - src/admin/components/schema/SchemaView.tsx
  - src/admin/components/views/LoginPage.tsx
autonomous: true

must_haves:
  truths:
    - "User sees spinner icon during form submissions"
    - "User sees spinner icon during delete confirmations"
    - "User sees spinner icon during login"
    - "Buttons are disabled with visual loading state"
  artifacts:
    - path: "src/admin/components/ui/spinner.tsx"
      provides: "Reusable spinner component"
      exports: ["Spinner"]
    - path: "src/admin/components/records/RecordForm.tsx"
      provides: "Record form with spinner on submit button"
      contains: "Spinner"
    - path: "src/admin/components/views/LoginPage.tsx"
      provides: "Login page with spinner on submit button"
      contains: "Spinner"
  key_links:
    - from: "src/admin/components/records/RecordForm.tsx"
      to: "src/admin/components/ui/spinner.tsx"
      via: "import { Spinner }"
      pattern: "import.*Spinner.*from.*spinner"
---

<objective>
Add visual loading spinners to all async operations throughout the admin UI.

Purpose: Users currently only see text changes (e.g., "Saving..." -> "Save") during async operations. Adding animated spinner icons provides clearer visual feedback that an operation is in progress, improving perceived responsiveness.

Output: Spinner component and updated forms/buttons with loading spinners.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/13-ui-polish/13-RESEARCH.md
@src/admin/components/ui/button.tsx
@src/admin/components/records/RecordForm.tsx
@src/admin/components/views/LoginPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Spinner component</name>
  <files>src/admin/components/ui/spinner.tsx</files>
  <action>
Create a reusable Spinner component using Lucide's Loader2 icon with Tailwind's animate-spin utility.

Component requirements:
- Accept optional `className` prop for additional styling
- Accept optional `size` prop with values: "sm" (h-4 w-4), "md" (h-5 w-5), "lg" (h-6 w-6)
- Default size is "md"
- Include `aria-hidden="true"` since spinner is decorative (screen readers get loading text from button)
- Use the `cn` utility from `@/lib/utils` for class merging

Example usage pattern:
```tsx
<Button disabled={loading}>
  {loading && <Spinner className="mr-2" size="sm" />}
  {loading ? "Saving..." : "Save"}
</Button>
```

Follow the same file structure and doc comment style as other UI components in the codebase.
  </action>
  <verify>File exists at src/admin/components/ui/spinner.tsx with exported Spinner component</verify>
  <done>Spinner component created with size variants and proper accessibility attributes</done>
</task>

<task type="auto">
  <name>Task 2: Add spinners to forms and dialogs</name>
  <files>
    src/admin/components/records/RecordForm.tsx
    src/admin/components/records/DeleteConfirmation.tsx
    src/admin/components/schema/FieldForm.tsx
    src/admin/components/schema/SchemaView.tsx
    src/admin/components/views/LoginPage.tsx
  </files>
  <action>
Add Spinner component to all buttons that show loading states.

Update each file following this pattern:
1. Import Spinner: `import { Spinner } from "@/components/ui/spinner";`
2. Add spinner to button with loading state:
   - Add `{loading && <Spinner className="mr-2" size="sm" />}` inside button
   - Keep existing loading text (e.g., "Saving...", "Deleting...", "Signing in...")

Files to update:

**RecordForm.tsx** - Submit button (isSubmitting || loading)
```tsx
<Button type="submit" disabled={isSubmitting || loading}>
  {(isSubmitting || loading) && <Spinner className="mr-2" size="sm" />}
  {isSubmitting || loading
    ? "Saving..."
    : isEditing
      ? "Update Record"
      : "Create Record"}
</Button>
```

**DeleteConfirmation.tsx** - Delete button (loading prop)
```tsx
<AlertDialogAction disabled={loading}>
  {loading && <Spinner className="mr-2" size="sm" />}
  {loading ? "Deleting..." : "Delete"}
</AlertDialogAction>
```

**FieldForm.tsx** - Submit button (loading prop)
```tsx
<Button type="submit" className="w-full" disabled={loading}>
  {loading && <Spinner className="mr-2" size="sm" />}
  {loading ? "Saving..." : field ? "Update Field" : "Create Field"}
</Button>
```

**SchemaView.tsx** - Delete field and delete collection AlertDialogAction buttons
- Delete field button: add spinner when deletingFieldLoading
- Delete collection button: add spinner when deletingCollection

**LoginPage.tsx** - Submit button (loading state)
```tsx
<Button type="submit" className="w-full" disabled={loading}>
  {loading && <Spinner className="mr-2" size="sm" />}
  {loading ? "Signing in..." : "Sign in"}
</Button>
```
  </action>
  <verify>bun run build completes without errors</verify>
  <done>All async operation buttons show animated spinner icon when loading</done>
</task>

</tasks>

<verification>
1. Build passes: `bun run build`
2. Visual check: Start dev server and verify spinners appear on:
   - Record create/edit form submit
   - Record delete confirmation
   - Field create/edit form submit
   - Field delete confirmation
   - Collection delete confirmation
   - Login page submit
</verification>

<success_criteria>
- Spinner component exists and exports correctly
- All loading buttons show animated spinner icon alongside loading text
- No visual regression in button layouts
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/13-ui-polish/13-01-SUMMARY.md`
</output>

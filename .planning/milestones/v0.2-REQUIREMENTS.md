# Requirements Archive: v0.2 User Auth, Files & Realtime

**Archived:** 2026-01-28
**Status:** SHIPPED

This is the archived requirements specification for v0.2.
For current requirements, see `.planning/PROJECT.md` (Active section).

---

# Requirements: BunBase v0.2

**Defined:** 2026-01-26
**Core Value:** Ship a working backend-in-a-box that compiles to a single binary and auto-generates REST APIs from schema definitions

## v0.2 Requirements

Requirements for User Authentication, Files & Realtime milestone. Each maps to roadmap phases.

### Email Service

- [x] **EMAIL-01**: SMTP configuration (host, port, user, password) via CLI flags or env vars
- [x] **EMAIL-02**: Send email function with to, subject, body (HTML and plain text)
- [x] **EMAIL-03**: Template placeholders for tokens/links in email body

### User Authentication

- [x] **AUTH-01**: Auth collection type with special fields (email, password_hash, verified, created, updated)
- [x] **AUTH-02**: User can sign up with email and password
- [x] **AUTH-03**: User can log in with email and password, receives JWT token
- [x] **AUTH-04**: User can refresh token to extend session
- [x] **AUTH-05**: User can request email verification (sends verification email)
- [x] **AUTH-06**: User can confirm email verification with token
- [x] **AUTH-07**: User can request password reset (sends reset email)
- [x] **AUTH-08**: User can confirm password reset with token and new password
- [x] **AUTH-09**: Password validation (minimum length, complexity rules)
- [x] **AUTH-10**: Auth middleware for user routes (verify user JWT)
- [x] **AUTH-11**: Collection-level auth rules (who can create, read, update, delete records)

### File Uploads

- [x] **FILE-01**: File field type in schema definition
- [x] **FILE-02**: Multipart upload via records API (create and update)
- [x] **FILE-03**: Local filesystem storage in `{data_dir}/storage/{collection}/{record}/`
- [x] **FILE-04**: File serving endpoint `GET /api/files/{collection}/{record}/{filename}`
- [x] **FILE-05**: Filename sanitization (remove special chars, add random suffix)
- [x] **FILE-06**: Configurable file size limit (default 10MB)
- [x] **FILE-07**: MIME type validation (allowed types per field)
- [x] **FILE-08**: Multiple files per field support
- [x] **FILE-09**: File deletion when record is deleted (cleanup via hook)
- [x] **FILE-10**: File URL generation helper in API responses

### Realtime/SSE

- [x] **SSE-01**: SSE connection endpoint `GET /api/realtime`
- [x] **SSE-02**: Client ID assignment sent on connect (`PB_CONNECT` event)
- [x] **SSE-03**: Subscribe to collection changes (`POST /api/realtime` with subscriptions)
- [x] **SSE-04**: Subscribe to specific record changes
- [x] **SSE-05**: Create events broadcast to subscribers
- [x] **SSE-06**: Update events broadcast to subscribers
- [x] **SSE-07**: Delete events broadcast to subscribers
- [x] **SSE-08**: Unsubscribe from topics
- [x] **SSE-09**: Connection keep-alive (periodic ping)
- [x] **SSE-10**: Auto-disconnect inactive connections (5 min timeout)

### UI Polish

- [x] **UI-01**: Loading states with spinners during async operations
- [x] **UI-02**: Error toast notifications on failures
- [x] **UI-03**: Success toast confirmations on actions
- [x] **UI-04**: Form validation feedback with inline errors
- [x] **UI-05**: Consistent spacing throughout admin UI
- [x] **UI-06**: Keyboard navigation for forms and tables
- [x] **UI-07**: Responsive layout refinements for tablet/mobile

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| EMAIL-01 | Phase 9 | Complete |
| EMAIL-02 | Phase 9 | Complete |
| EMAIL-03 | Phase 9 | Complete |
| AUTH-01 | Phase 10 | Complete |
| AUTH-02 | Phase 10 | Complete |
| AUTH-03 | Phase 10 | Complete |
| AUTH-04 | Phase 10 | Complete |
| AUTH-05 | Phase 10 | Complete |
| AUTH-06 | Phase 10 | Complete |
| AUTH-07 | Phase 10 | Complete |
| AUTH-08 | Phase 10 | Complete |
| AUTH-09 | Phase 10 | Complete |
| AUTH-10 | Phase 10 | Complete |
| AUTH-11 | Phase 10 | Complete |
| FILE-01 | Phase 11 | Complete |
| FILE-02 | Phase 11 | Complete |
| FILE-03 | Phase 11 | Complete |
| FILE-04 | Phase 11 | Complete |
| FILE-05 | Phase 11 | Complete |
| FILE-06 | Phase 11 | Complete |
| FILE-07 | Phase 11 | Complete |
| FILE-08 | Phase 11 | Complete |
| FILE-09 | Phase 11 | Complete |
| FILE-10 | Phase 11 | Complete |
| SSE-01 | Phase 12 | Complete |
| SSE-02 | Phase 12 | Complete |
| SSE-03 | Phase 12 | Complete |
| SSE-04 | Phase 12 | Complete |
| SSE-05 | Phase 12 | Complete |
| SSE-06 | Phase 12 | Complete |
| SSE-07 | Phase 12 | Complete |
| SSE-08 | Phase 12 | Complete |
| SSE-09 | Phase 12 | Complete |
| SSE-10 | Phase 12 | Complete |
| UI-01 | Phase 13 | Complete |
| UI-02 | Phase 13 | Complete |
| UI-03 | Phase 13 | Complete |
| UI-04 | Phase 13 | Complete |
| UI-05 | Phase 13 | Complete |
| UI-06 | Phase 13 | Complete |
| UI-07 | Phase 13 | Complete |

---

## Milestone Summary

**Shipped:** 41 of 41 v0.2 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-28 as part of v0.2 milestone completion*

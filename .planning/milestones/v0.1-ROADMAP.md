# Milestone v0.1: MVP

**Status:** ✅ SHIPPED 2026-01-26
**Phases:** 1-8
**Total Plans:** 21

## Overview

BunBase delivers a backend-in-a-box alternative to PocketBase. The roadmap builds from database foundation through API generation, query capabilities, hooks, authentication, admin UI, and finally single-binary packaging. Each phase delivers a coherent, verifiable capability that builds on the previous phases.

## Phases

### Phase 1: Core Foundation

**Goal**: Establish the database layer and schema system that all other phases depend on
**Depends on**: Nothing (first phase)
**Requirements**: SCHM-01, SCHM-02, SCHM-03, SCHM-04, SCHM-05, SCHM-06, SCHM-07, SCHM-08, SCHM-09, SCHM-10, SCHM-11, SCHM-12, SCHM-13
**Plans**: 3 plans

Plans:
- [x] 01-01-PLAN.md - Project setup, database initialization, and core type definitions
- [x] 01-02-PLAN.md - Schema manager for collection and field CRUD operations
- [x] 01-03-PLAN.md - Validation layer and record operations with system fields

**Details:**
- bun:sqlite with strict mode for parameter safety
- Schema-in-database pattern (_collections/_fields tables)
- nanoid for 21-char URL-safe IDs
- 12-step shadow table migration for schema changes
- Dynamic Zod validation for all field types

---

### Phase 2: REST API Generation

**Goal**: Auto-generate CRUD endpoints from collection schemas
**Depends on**: Phase 1
**Requirements**: API-01, API-02, API-03, API-04, API-05
**Plans**: 1 plan

Plans:
- [x] 02-01-PLAN.md - HTTP server with CRUD endpoints (TDD)

**Details:**
- Bun.serve() routes for declarative HTTP routing
- Error mapping: not found→404, validation→400, exists→409
- List endpoint returns {items, totalItems}
- DELETE returns 204 No Content

---

### Phase 3: Query Capabilities

**Goal**: Enable filtering, sorting, pagination, and relation expansion on list endpoints
**Depends on**: Phase 2
**Requirements**: API-06, API-07, API-08, API-09
**Plans**: 2 plans

Plans:
- [x] 03-01-PLAN.md - Query builder with filtering, sorting, pagination (TDD)
- [x] 03-02-PLAN.md - Relation expansion and server integration

**Details:**
- URL operators parsed from key suffix (field> becomes >)
- LIKE escapes %, _, \\ using ESCAPE clause
- Pagination 1-indexed, perPage bounded 1-500 (default 30)
- Expand object only added to records with expanded relations

---

### Phase 4: Lifecycle Hooks

**Goal**: Enable custom logic before and after CRUD operations
**Depends on**: Phase 2
**Requirements**: HOOK-01, HOOK-02, HOOK-03, HOOK-04, HOOK-05, HOOK-06, HOOK-07, HOOK-08
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md - HookManager core with type-safe events and middleware chain
- [x] 04-02-PLAN.md - Server integration with hook-aware CRUD operations

**Details:**
- PocketBase-style middleware pattern with next()
- Global handlers run for all collections
- Handlers execute in registration order (FIFO)
- After hooks swallow errors (console.error only)

---

### Phase 5: Admin Authentication

**Goal**: Secure the admin interface with JWT-based authentication
**Depends on**: Phase 2
**Requirements**: AUTH-01, AUTH-02, AUTH-03, AUTH-04
**Plans**: 2 plans

Plans:
- [x] 05-01-PLAN.md - Admin module with password hashing and JWT utilities
- [x] 05-02-PLAN.md - Route protection middleware and auth HTTP endpoints

**Details:**
- Bun.password.hash with argon2id algorithm
- JWT tokens use HS256 with 24h expiry via jose library
- requireAdmin returns Admin | Response union type
- Initial admin auto-created on startup

---

### Phase 6: Admin UI Records

**Goal**: Provide a web interface for browsing and managing collection records
**Depends on**: Phase 5
**Requirements**: UI-01, UI-02, UI-03, UI-04, UI-05, UI-08, UI-09
**Plans**: 5 plans

Plans:
- [x] 06-01-PLAN.md - React, Tailwind CSS v4, and shadcn/ui foundation setup
- [x] 06-02-PLAN.md - Layout with sidebar navigation and view state routing
- [x] 06-03-PLAN.md - Dashboard with collection statistics cards
- [x] 06-04-PLAN.md - Records table with TanStack Table and pagination
- [x] 06-05-PLAN.md - Record forms for create, edit, and delete operations

**Details:**
- Tailwind CSS v4 with CSS-based configuration
- shadcn/ui copy-paste pattern
- TanStack Table for headless data tables
- DynamicField for type-based form inputs

---

### Phase 7: Admin UI Schema Editor

**Goal**: Enable runtime schema modifications through the admin interface
**Depends on**: Phase 6
**Requirements**: UI-06, UI-07
**Plans**: 4 plans

Plans:
- [x] 07-01-PLAN.md - Backend API routes for schema mutation (POST/PATCH/DELETE collections and fields)
- [x] 07-02-PLAN.md - Select component, schema API functions, and useSchema hook
- [x] 07-03-PLAN.md - Schema UI components (FieldsTable, FieldForm, FieldSheet, SchemaView)
- [x] 07-04-PLAN.md - App integration with navigation and create collection sheet

**Details:**
- Schema mutations protected by requireAdmin middleware
- Field type badges with color coding
- CreateCollectionSheet validates collection names
- Schema changes take effect immediately

---

### Phase 8: Single Binary Packaging

**Goal**: Compile everything into a single executable with embedded admin UI
**Depends on**: Phase 7
**Requirements**: DEPL-01, DEPL-02, DEPL-03, DEPL-04, DEPL-05
**Plans**: 2 plans

Plans:
- [x] 08-01-PLAN.md - CLI entry point with argument parsing (--port, --db, --help)
- [x] 08-02-PLAN.md - Build configuration and binary verification

**Details:**
- util.parseArgs for zero-dependency CLI argument parsing
- bun build --compile --minify for production binaries
- 56MB binary includes all assets
- Server starts on port 8090 by default

---

## Milestone Summary

**Key Decisions:**

- Schema-in-database pattern for runtime flexibility
- nanoid over UUID for URL-safe IDs
- Bun.serve() routes for declarative HTTP
- PocketBase-style hook middleware
- Tailwind CSS v4 with CSS-based config
- shadcn/ui copy-paste pattern

**Issues Resolved:**

- TypeScript compilation errors with bun:sqlite (runtime works, types need fixing)
- CSS warnings during build (Tailwind v4 @ rules handled correctly at runtime)

**Technical Debt Incurred:**

- TypeScript type definitions for bun:sqlite need updating
- 2 orphaned exports (listRecords, default hooks) to clean up in v0.2

---

*For current project status, see .planning/PROJECT.md*
